Initial state: (0)
Initial register assignments: rx=0, rpa=0
(0) a->s:bookID{rx'=rx/\rpa'=rpa} (1)
(1) s->a:x{x>=0/\rx'=x/\rpa'=rpa} (2)
(2) s->b:y{rx=y/\rx'=rx/\rpa'=rpa} (3)
(3) a->b:pa{0<=pa/\pa<rx+1/\rx'=rx/\rpa'=rpa} (4)
(4) b->a:ok{ok=1/\rx-rpa<=rpa/\rx'=rx/\rpa'=rpa} (5)
(5) b->a:pb{pb=rx-rpa/\rx'=rx/\rpa'=rpa} (6)
(6) a->s:bye{bye=2/\rx'=rx/\rpa'=rpa} (7)
(4) b->a:no{no=0/\rx-rpa>rpa/\rx'=rx/\rpa'=rpa} (8)
(8) a->s:canc{canc=3/\rx'=rx/\rpa'=rpa} (9)
Final states: (7), (9)